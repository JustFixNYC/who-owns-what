# Settings in the [build] context are global and are applied to all contexts
# unless otherwise overridden by more specific contexts.
[build]
  # Directory to change to before starting a build.
  # This is where we will look for package.json/.nvmrc/etc.
  base = "client/"

  # Directory that contains the deploy-ready HTML files and assets generated by
  # the build. This is relative to the base directory if one has been set, or the
  # root directory if a base has not been set.
  publish = "build/"

  # Default build command.
  #
  # Note that we are removing `node_modules/.cache` because Netlify caches
  # `node_modules` by default, and Create React App currently over-uses
  # this cache because, without clearing it, changes to `browserslist`
  # in our package.json won't propagate. For more details on this, see
  # https://github.com/JustFixNYC/who-owns-what/pull/335.
  command = "rm -rf node_modules/.cache && yarn build"
